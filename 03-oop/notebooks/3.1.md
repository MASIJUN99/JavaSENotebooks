# 一、面向对象概述

面向对象(Object Oriented)是软件开发方法。面向对象的概念和应用已超越了程序设计和软件开发，是一种对现
实世界理解和抽象的方法，是计算机编程技术发展到一定阶段后的产物。

面向对象是相对于面向过程来讲的，指的是把 相关的数据和方法组织为一个**整体**来看待，
从更高的层次来进行系统建模，更贴近事物的自然运行模式。

面向过程到面向对象思想层面的转变：

1. 面向过程关注的是执行的过程，面向对象关注的是具备功能的对象。

2. 面向过程到面向对象，是程序员思想上 从执行者到指挥者的转变。

## 1.1 面向对象编程都有什么

### 1.1.1 对象

实例化后的类。

创建对象的语法如下：

```java
类名 对象名 = new 类名();
```

在使用类的时候，一定要注意作用域，作用域可以简单地理解为变量的生存期或者作用范围，
也就是变量从定义开始到什么时候消亡。
1. 局部变量的作用域仅限于定义它的方法内。而成员变量的作用域在整个类内部都是可见的。
2. 同时在相同的方法中，不能有同名的局部变量；在不同的方法中，可以有同名的局部变量。
3. 成员变量和局部变量同名时，局部变量具有更高的优先级。 大家可以编写代码验证一下。

### 1.1.2 类

类中含有类的属性及方法

**类的定义**：

1. 类是相同或相似对象的一种抽象，是对象的一个模板，它描述一类对象的行为和状态。
2. 类是具有相同属性和方法（行为）的对象的集合

### 1.1.3 属性

类中的成员变量，要与一般变量能区分开。

一个类可以包含以下类型变量：

1. 局部变量：在方法、构造方法或者语句块中定义的变量被称为局部变量。变量声明和初始化都是在方法中，
   方法结束后，变量就会自动销毁。
2. 成员变量：成员变量是定义在类中，方法体之外的变量。这种变量在创建对象的时候实例化。
   成员变量可以被类中方法、构造方法和特定类的语句块访问。
3. 类变量：也叫静态变量，类变量也声明在类中，方法体之外，但必须声明为 static 类型。

### 1.1.4 方法

存在在类中的面向过程函数（可以这么理解，但不是这么说的）。

可以定义一个方法或多个方法，当然也可以不定义方法。

## 1.2 堆栈

### 1.2.1 栈

栈（Stack）：Java中一个线程就有一个栈区，每一个栈中的元素都是私有的，不被其他线程所访问，
栈都有先进后出的特点，栈中的数据大小与生存期都是确定的，缺乏灵活性，但存取速度比堆快，仅次于寄存器。

栈存储速度快的原因：

1. 栈内存，通过栈指针来创建空间与释放空间
2. 指针向下移动，会创建新的内存，向上则会释放这些内存
3. 这种移动的方式，必须要明确移动大小与范围
4. 存储数据量小

### 1.2.2 堆

堆（Heap）：存放的是对象的类。

Java中每new一个对象，就会告诉JVM去开辟一个新的堆内存空间。

堆的优点是，不必关注堆内存中开辟多少空间，也不需要关注内存占用时长。

堆内存中的内存释放是由GC（垃圾回收器）完成的。

### 1.2.3 总结

其实和C++指针原理类似，只不过没有解引用运算符、指针运算符罢了。

与Python更加相似！

无非就是变量名全部是以指针的形式存在，在调用赋值的时候自动解引用。

# 二、Java面向对象编程

类必须编写在.java文件中。

一个.java文件可以存在多个类，但只能存在一个public修饰的类。且必须与文件名完全一致。

要与接口区分开。

### 2.1 类的定义

定义一个类，主要有三个步骤：

1. 定义类名，用于区分不同的类。如下代码中 public class 后面跟的就是类名。class是声明类的关键字，
   类名后面跟上大括号，大括号里面就是类的一些信息。public 为权限修饰符。

2. 编写类的属性。对象有什么，需要通过属性来表示。属性的定义是写在类名后面的大括号里，在定义属性时，
   要明确属性的类型。在一个类当中可以写一个或多个属性。当然也可以不定义属性。

3. 编写类的方法。方法也是写在大括号里面。可以定义一个方法或多个方法，当然也可以不定义方法。

### 2.2 构造方法

在面向对象中有一个非常重要的知识点，就是构造方法。每个类都有构造方法，
在创建该类的对象的时候他们将被调用，如果没有定义构造方法，Java 编译器会提供一个默认构造方法。
创建一个对象的时候，至少调用一个构造方法。比如在新建一个对象 new Object()，括号中没有任何参数，
代表调用一个无参构造方法（默认构造方法就是一个无参构造方法）。构造方法的名称必须与类名相同，
一个类可以定义多个构造方法。

构造方法的具体内容：
1. 构造方法的名称与类名相同，且没有返回值。它的语法格式如下：

2. 如果在定义类的时候没有写构造方法，系统会默认生成一个无参构造方法，这个构造方法什么也不会做。

3. 当有指定的构造方法时，系统都不会再添加无参构造方法了。

4. 构造方法的重载：方法名相同，但参数不同的多个方法，调用时会自动根据不同的参数选择相应的方法。

### 2.3 静态成员及方法

**静态成员**

Java 中被 static 修饰的成员称为静态成员或类成员。它属于整个类所有，而不是某个对象所有，
即被类的所有对象所共享。静态成员可以使用类名直接访问，也可以使用对象名进行访问。

**静态方法**

被 static 修饰的方法是静态方法，静态方法不依赖于对象，不需要将类实例化便可以调用，
由于不实例化也可以调用，所以不能有 this，也不能访问非静态成员变量和非静态方法。
但是非静态成员变量和非静态方法可以访问静态方法。

### 2.4 权限修饰符

一共有四个权限修饰符

1. private
2. default
3. protected
4. public

|  访问权限  |  本类  |  同包  |  子类  |  其他  |
| :-------: | :---: | :---: | :---: | :---: |
| private   |   √   |       |       |       |
| default   |   √   |   √   |       |       |
| protected |   √   |   √   |   √   |       |
| public    |   √   |   √   |   √   |   √   |


### 2.5 this

不知道大家有没有编写过C++、Python，实际上就是在类中用于指定这个类的一个关键字。

this 关键字代表当前对象。使用 this.属性 操作当前对象的属性，this.方法 调用当前对象的方法。

其中用 private 修饰的属性，必须定义 getter 和 setter 方法才可以访问到。

### 2.6 final

final 关键字可以修饰类、方法、属性和变量。

1. final 修饰类，则该类不允许被继承，为最终类
2. final 修饰方法，则该方法不允许被覆盖（重写）
3. final 修饰属性：则该类的属性不会进行隐式的初始化（类的初始化属性必须有值）或在构造方法中赋值（但只能选其一）
4. final 修饰变量，则该变量的值只能赋一次值，即常量

### 2.7 重载

#### 2.7.1 方法重载

方法重载是指在一个类中定义多个同名的方法，但要求每个方法具有不同的参数的类型或参数的个数。
方法重载一般用于创建一组任务相似但是参数不同的方法。

方法重载有以下几种规则：

1. 方法中的参数列表必须不同。比如：参数个数不同或者参数类型不同。
2. 重载的方法中允许抛出不同的异常
3. 可以有不同的返回值类型，但是参数列表必须不同。
4. 可以有不同的访问修饰符。

#### 2.7.2 方法重写

子类可以继承父类的方法，但如果子类对父类的方法不满意，想在里面加入适合自己的一些操作时，
就需要将方法进行重写。并且子类在调用方法中，优先调用子类的方法。

当然在方法重写时要注意，重写的方法一定要与原父类的方法语法**保持一致**，
比如返回值类型，参数类型及个数，和方法名都必须**一致**。

# 三、封装

封装，即隐藏对象的属性和实现细节，仅对外公开接口，控制在程序中属性的读和修改的访问级别

**这样做有什么好处？**

1. 只能通过规定的方法访问数据。
2. 隐藏类的实例细节，方便修改和实现。

**如何去实现类的封装呢？**

1. 修改属性的可见性，在属性的前面添加修饰符 (private)
2. 对每个值属性提供对外的公共方法访问，如创建 getter/setter（取值和赋值）方法，用于对私有属性的访问
3. 在 getter/setter 方法里加入属性的控制语句，例如我们可以加一个判断语句，对于非法输入给予否定。

![img.png](img.png)

如果我们没有在属性前面添加任何修饰符，我们通过对象就可以直接对属性值进行修改，
没有体现封装的特性。这在许多程序设计中都是不安全的，所以我们需要利用封装，来改进我们的代码。

**例子**

例如我之前编写的分治排序[MergeSort](../../02-basic-java/10-sort/src/sample/java/MergeSort.java)

仔细观察，我在MergeSort类中其实有4个方法，分别是`mergeSort`、`mergeSortInPlace`、`merge`和`slice`。

其中只有`mergeSort`和`mergeSortInPlace`是public修饰的公开方法，
因为我希望别人访问分治排序时，只访问关键、起作用的方法，
而方法中为了实现中间过程定义的方法我不希望大家访问。


# 四、继承

继承可以看成是类与类之间的衍生关系。

所以继承需要符合的关系是：父类更通用，子类更具体。

```java
class 子类 extends 父类 {...}
```

**为什么需要继承？**

如果有两个类相似，那么它们会有许多重复的代码，
导致后果就是代码量大且臃肿，后期的维护性不高。
通过继承就可以解决这个问题，将两段代码中相同的部分提取出来组成一个父类，实现代码的复用。

**继承的特点：**

1. 子类拥有父类除 private 以外的所有属性和方法。
2. 子类可以拥有自己的属性和方法。
3. 子类可以重写实现父类的方法。
4. Java 中的继承是单继承，一个类只有一个父类。

*注：Java 实现多继承的一个办法是 implements（实现）接口，但接口不能有非静态的属性，这一点请注意。*







